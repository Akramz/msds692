# Data translation pipeline

## Goal

The goal of this lab is to study the most common text-based data formats. Parsing data files can be tricky, but generating them is easy. In this first homework, you will therefore be generating data in multiple formats but using standard Python libraries to read that data back in.

## Description

### Getting some initial stock data

Grab Apple's 35 year stock history using this URL

```
http://ichart.finance.yahoo.com/table.csv?s=AAPL
```

The file generated by that website is a CSV file with 8996 lines, which we can discover easily with `wc`:
 
```bash
$ wc ~/github/msan692/data/AAPL.csv
    8996    8997  583817 /Users/parrt/github/msan692/data/AAPL.csv
```

The first thing to notice is that there is a header row that describes the data in the various columns.
 
```bash
$ head ~/github/msan692/data/AAPL.csv
Date,Open,High,Low,Close,Volume,Adj Close
2016-08-12,107.779999,108.440002,107.779999,108.18,18612300,108.18
2016-08-11,108.519997,108.93,107.849998,107.93,27484500,107.93
2016-08-10,108.709999,108.900002,107.760002,108.00,24008500,108.00
```

The data follows the header row, with one record per line. The key element of the CSV format is the separator, more specifically the venerable comma. It is the column or field separator that allows us to distinguish between the elements. For *m* columns, there are *m-1* separators. For *n* records, there are *n* lines (with possibly a header row in addition).

### Parsing simple CSV files

```csv
when,a,b
2016-08-12,1.2,3
2016-08-13,3.99003,4.3
```

###  Generating HTML

```html
<html>
<body>
<table>
<tr><th>when</th><th>a</th><th>b</th></tr>
<tr><td>2016-08-12</td><td>1.2</td><td>3.0</td></tr>
<tr><td>2016-08-13</td><td>3.99003</td><td>4.3</td></tr>
</table>
</body>
</html>
```

<img src="figures/testdatahtml.png" width=170>

<img src="figures/datahtml.png" width=450>

### Generating XML

```xml
<?xml version="1.0"?>
<history>
  <record>
    <when>2016-08-12</when><a>1.2</a><b>3.0</b>
  </record>
  <record>
    <when>2016-08-13</when><a>3.99003</a><b>4.3</b>
  </record>
</history>
```

From within the chrome browser, the real XML data from the AAPL history looks like this (although I may have added an XML viewer plug into the browser):
 
<img src="figures/dataxml.png" width=170>

### Generating JSON

```json
{
  "history":[
    "record":{
      "when":"2016-08-12", "a":"1.2", "b":"3.0"
    }
    "record":{
      "when":"2016-08-13", "a":"3.99003", "b":"4.3"
    }
  ]
}
```

## Deliverables